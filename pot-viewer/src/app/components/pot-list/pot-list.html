<div class="pot-list-container">
    <h2>Pot Collection</h2>

    <div *ngIf="loading()" class="loading">
        Loading pots...
    </div>

    <div *ngIf="error()" class="error-message">
        {{ error() }}
        <button (click)="loadPots()" class="retry-button">Retry</button>
    </div>

    <!-- Debug information to verify data -->
    <div class="debug-info">
        <h3>Debug Information</h3>
        <p>Loading state: <strong>{{loading()}}</strong></p>
        <p>Number of pot instances: <strong>{{potInstances().length}}</strong></p>
        <p>Error state: <strong>{{error() || 'None'}}</strong></p>
        <button (click)="loadPots()" class="retry-button">Reload Data</button>
    </div>

    <!-- Display the pot accounts (instances) -->
    <div class="pot-accounts-section" *ngIf="potInstances().length > 0">
        <h3>Your Pot Accounts</h3>
        <div class="pot-accounts-grid">
            <div *ngFor="let account of potInstances(); let i = index" class="account-card" [class.inactive]="!account.isActive">
                <div class="account-status" [class.active]="account.isActive" [class.inactive]="!account.isActive">
                    {{ account.isActive ? 'Active' : 'Inactive' }}
                </div>
                <h3>{{ account.name }}</h3>
                <div class="account-balance">
                    <span class="currency">{{ account.currency }}</span>
                    <span class="amount">{{ account.balance | number:'1.2-2' }}</span>
                </div>
                <div class="account-details">
                    <div *ngIf="account.accountNumber" class="detail-item">
                        <span class="label">Account:</span> {{ account.accountNumber }}
                    </div>
                    <div *ngIf="account.lastUpdated" class="detail-item">
                        <span class="label">Last Updated:</span> {{ account.lastUpdated | date:'medium' }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>